import{r as o,j as e,I as m,c as B}from"./vendor_react-DI8shxQV.js";import{i as U,g as X,r as y,o as Y,s as R}from"./vendor_firebase-LQfHLqtG.js";import{m as a,A as D}from"./vendor-xH--CNcS.js";(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function x(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(i){if(i.ep)return;i.ep=!0;const n=x(i);fetch(i.href,n)}})();const W={apiKey:"AIzaSyCi2uFIOdPGHDXyRN6N3ZwkvuMU2NSxHMg",authDomain:"forluv-c5d3f.firebaseapp.com",databaseURL:"https://forluv-c5d3f-default-rtdb.firebaseio.com",projectId:"forluv-c5d3f",storageBucket:"forluv-c5d3f.firebasestorage.app",messagingSenderId:"202074450458",appId:"1:202074450458:web:f60a4a3b3ec19b613e7fa3",measurementId:"G-Y1HD8VCLH0"},G=U(W),j=X(G);function K(){const c=o.useRef(null),[g,x]=o.useState(!1),[l,i]=o.useState("#000000"),[n,h]=o.useState(5),[p,N]=o.useState("pencil"),[F,k]=o.useState(!1),[M,b]=o.useState(!0),[E,w]=o.useState(!1),[C,H]=o.useState({x:0,y:0}),[L,S]=o.useState(!1),v=()=>{const t=c.current;if(!t)return;const s=t.getContext("2d");if(!s)return;const r=s.getImageData(0,0,t.width,t.height);t.width=window.innerWidth*.8,t.height=window.innerHeight*.8,s.strokeStyle=p==="eraser"?"#FFFFFF":l,s.lineWidth=n,s.lineCap="round",r&&s.putImageData(r,0,0)},P=t=>{const s=c.current;if(!s)return;const r=s.getBoundingClientRect();H({x:t.clientX-r.left,y:t.clientY-r.top})};o.useEffect(()=>(v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)),[]),o.useEffect(()=>{const t=c.current;if(!t)return;const s=t.getContext("2d");s&&(s.strokeStyle=p==="eraser"?"#FFFFFF":l,s.lineWidth=n,s.lineCap="round")},[l,n,p]),o.useEffect(()=>{const t=c.current;if(!t)return;const s=t.getContext("2d");if(!s)return;b(!0);const r=y(j,"drawing");Y(r,d=>{const f=d.val();if(f){const u=new Image;u.onload=()=>{s.clearRect(0,0,t.width,t.height),s.drawImage(u,0,0),b(!1)},u.src=f}else b(!1)})},[]);const T=t=>{const s=c.current;if(!s)return;const r=s.getContext("2d");if(!r)return;const d=s.getBoundingClientRect(),f=t.clientX-d.left,u=t.clientY-d.top;r.beginPath(),r.moveTo(f,u),x(!0)},O=t=>{if(!g)return;const s=c.current;if(!s)return;const r=s.getContext("2d");if(!r)return;const d=s.getBoundingClientRect(),f=t.clientX-d.left,u=t.clientY-d.top;r.lineTo(f,u),r.stroke(),F||(k(!0),setTimeout(()=>{const A=y(j,"drawing");R(A,s.toDataURL()),k(!1)},1e3))},I=()=>{x(!1)},z=()=>{w(!0)},$=()=>{const t=c.current;if(!t)return;const s=t.getContext("2d");if(!s)return;s.clearRect(0,0,t.width,t.height);const r=y(j,"drawing");R(r,null),w(!1)};return e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-pink-100 to-pink-200",children:[e.jsxs(a.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-white/30 backdrop-blur-lg p-6 rounded-xl shadow-2xl border border-pink-200",children:[e.jsx("div",{className:"flex flex-col gap-4 mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N("pencil"),className:`p-2 rounded-lg transition-all ${p==="pencil"?"bg-pink-500 text-white":"bg-white/30 text-pink-500 hover:bg-white/40"}`,children:e.jsx(m,{icon:"ph:pencil-fill",className:"h-6 w-6"})}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N("eraser"),className:`p-2 rounded-lg transition-all ${p==="eraser"?"bg-pink-500 text-white":"bg-white/30 text-pink-500 hover:bg-white/40"}`,children:e.jsx(m,{icon:"ph:eraser-fill",className:"h-6 w-6"})})]}),e.jsxs(a.div,{whileHover:{scale:1.05},className:"relative",children:[e.jsx("input",{type:"color",value:l,onChange:t=>i(t.target.value),className:"w-10 h-10 rounded-lg cursor-pointer border-2 border-pink-200 opacity-0 absolute"}),e.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-pink-200",style:{backgroundColor:l}})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{icon:"ph:circle-half-fill",className:"h-5 w-5 text-pink-500"}),e.jsx(a.input,{whileHover:{scale:1.02},type:"range",min:"1",max:"20",value:n,onChange:t=>h(parseInt(t.target.value)),className:"w-32 accent-pink-500"})]})]}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:z,className:"p-2 bg-pink-500/80 text-white rounded-lg hover:bg-pink-500 transition-all",children:e.jsx(m,{icon:"ph:trash-fill",className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{children:M&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-white/50 backdrop-blur-sm rounded-lg",children:e.jsx(a.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-12 w-12 border-4 border-pink-500 border-t-transparent rounded-full"})})}),e.jsx(a.canvas,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},ref:c,onMouseDown:T,onMouseMove:t=>{P(t),O(t)},onMouseUp:I,onMouseOut:()=>{I(),S(!1)},onMouseEnter:()=>S(!0),className:"border-2 border-pink-200 rounded-lg cursor-none bg-white",style:{cursor:"none"}}),L&&e.jsx("div",{className:"absolute pointer-events-none",style:{left:`${C.x}px`,top:`${C.y}px`,width:`${n*2}px`,height:`${n*2}px`,borderRadius:"50%",border:"1px solid rgba(0,0,0,0.2)",backgroundColor:p==="eraser"?"rgba(255,255,255,0.5)":`${l}80`,transform:"translate(-50%, -50%)",position:"absolute",pointerEvents:"none"}})]})]}),e.jsx(D,{children:E&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:e.jsx(a.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"bg-white/80 backdrop-blur-md p-6 rounded-xl shadow-2xl border border-pink-200/50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(m,{icon:"ph:warning-circle-fill",className:"h-12 w-12 text-pink-500"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"ยืนยันการลบทั้งหมด"}),e.jsx("p",{className:"text-gray-600",children:"คุณต้องการลบภาพวาดทั้งหมดหรือไม่?"}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200/80 backdrop-blur-sm text-gray-800 rounded-lg hover:bg-gray-300/80 transition-all",children:"ยกเลิก"}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:$,className:"px-4 py-2 bg-pink-500/80 backdrop-blur-sm text-white rounded-lg hover:bg-pink-600/80 transition-all",children:"ลบทั้งหมด"})]})]})})})})]})}B.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(K,{})}));
